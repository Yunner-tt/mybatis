<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cn.map.UserImpl">
<!-- 查询所有 -->
  <select id="selectAll" resultType="emp" >
  select * from ssm NATURAL JOIN department
  </select>
<!-- 按照部门查询 -->
  <select id="selectAll_bydep" resultType="emp" >
  select * from ssm NATURAL JOIN department where depname=#{0}
  </select>
<!-- 按照id查询 -->
  <select id="selectbyid" resultType="emp" >
  select * from ssm where eno = #{0}
  </select>
  
<!-- 四种不同形式的多参数传入 -->
    <select id="selectone_1" resultType="emp" >
  select * from ssm where eage = #{param1} and esex = #{param2}
  </select>
    <select id="selectone_2" resultType="emp" >
  select * from ssm where eage = #{age} and esex = #{sex}
  </select>
    <select id="selectone_3" resultType="emp" >
  select * from ssm where eage = #{age} and esex = #{sex}
  </select>
    <select id="selectone_4" resultType="emp" >
  select * from ssm where eage = #{eage} and esex = #{esex}
  </select>
<!--                    插入                    -->
  <insert id="insert" parameterType="emp">
  INSERT into ssm(eno,ename,esex,eage,depid) VALUES(#{eno},#{ename},#{esex},#{eage},#{depid})
  </insert>
  
  <insert id="inset_department" >
  INSERT into department(depid,depname) VALUES(#{depid},#{depname})
  </insert>
  
  <insert id="insert_more" parameterType="java.util.List">
        insert into ssm(eno,ename,esex,eage,depid) values
        <foreach collection="list" index="index" separator="," item="item">
            (#{item.eno},#{item.ename},#{item.esex},#{item.eage},#{item.depid})
        </foreach>
  </insert>
<!--                    删除                    -->
  <delete id="delet" parameterType="int">
  DELETE FROM ssm WHERE eno = #{0}
  </delete>
  
  <delete id="delet_more" parameterType = "java.util.List">
        delete from ssm where eno in
        <foreach collection="list" open="(" close=")" item="item" separator="," >
            #{item}
        </foreach>
  </delete>

  <delete id="delet_dep">
  DELETE FROM department WHERE depname = #{0}
  </delete>
  
<!--                    修改                    -->
  <update id="update" parameterType="emp">
  UPDATE ssm SET  ename = #{ename} where eno = #{eno}
  </update>
  
    <update id="update_more"  parameterType="java.util.List">  
    <foreach collection="list" item="item" index="index" open="" close="" separator=";">
        update ssm
        <set>
            ename=#{item.ename}
        </set>
        where eno = #{item.eno}
    </foreach>      
  </update>
<!--                    删除表                    -->
  <update id="truncateTable">
  TRUNCATE TABLE #{0};
  </update>
  
</mapper>